<% provide(:title, t("label.user.login")) %>
<%= render Ui::CardComponent.new(size: :sm) do |card| %>
  <% card.with_footer do %>
    <div class="flex items-center justify-center py-4 text-center bg-gray-50 dark:bg-gray-700">
      <span class="text-sm text-gray-600 dark:text-gray-200">アカウント未登録ですか？</span>
      <%= link_to(t("label.user.signup"), new_user_registration_path,
                  class: "mx-2 text-sm font-bold text-blue-500 dark:text-blue-400 hover:underline") %>
    </div>
  <% end %>

  <h3 class="mt-3 text-xl font-medium text-center text-gray-600 dark:text-gray-200">
    <%= t("label.user.login") %>
  </h3>

  <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
    <%= render Form::FieldComponent.new(
      form: f,
      attribute: :username,
      required: true,
      autofocus: true,
      placeholder: "@willem",
      pattern: "@[a-zA-Z0-9_]+",
      wrapper_class: "w-full mt-4"
    ) %>

    <%# Password field with "Forgot password" link - keeping custom layout %>
    <div class="mt-4">
      <div class="flex items-center justify-between">
        <%= f.label :password, class: "block text-sm text-gray-800 dark:text-gray-200" %>
        <%= link_to("パスワードを忘れた", new_user_password_path,
                    class: "text-xs text-gray-600 dark:text-gray-400 hover:underline") %>
      </div>
      <%= f.password_field(:password, autofocus: true,
                           class: "block w-full px-4 py-2 mt-2 text-gray-700 bg-white border rounded-lg dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-300 focus:ring-blue-300/40 focus:outline-hidden focus:ring-3",
                           autocomplete: "current-password") %>
    </div>

    <% if devise_mapping.rememberable? %>
      <%= render Form::CheckboxComponent.new(
        form: f,
        attribute: :remember_me,
        label: "次回から自動ログインする",
        wrapper_class: "mt-4"
      ) %>
    <% end %>

    <div class="mt-6">
      <%= render Ui::ButtonComponent.new(variant: :primary, type: :submit, full_width: true) do %>
        <%= t("label.user.login") %>
      <% end %>
    </div>
  <% end %>
<% end %>
